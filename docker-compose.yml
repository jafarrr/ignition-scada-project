version: '3.8'

services:
  ignition:
    image: inductiveautomation/ignition:8.3
    container_name: ignition-scada
    ports:
      - "8088:8088"   # HTTP
      - "8043:8043"   # HTTPS
      - "8060:8060"   # Gateway Network (for redundancy/connections)
    volumes:
      # Mount the data directory for persistent storage and local editing
      - ./data:/usr/local/bin/ignition/data
    environment:
      # Accept EULA
      - ACCEPT_IGNITION_EULA=Y
      # Edition selection (standard, maker, edge)
      - IGNITION_EDITION=standard
      # Gateway admin credentials (change these for production)
      - GATEWAY_ADMIN_USERNAME=admin
      - GATEWAY_ADMIN_PASSWORD=password
      # Set timezone (optional)
      - TZ=America/New_York

      # Modules to enable (comma-separated list)
      # Edit this list to include only the modules you want installed
      # Common modules: vision, perspective, tag-historian, reporting, alarm-notification,
      #                 opc-ua, sfc, sql-bridge, enterprise-administration, mobile,
      #                 web-browser, web-developer, symbol-factory
      # Driver modules: allen-bradley-drivers, siemens-drivers, modbus-driver-v2,
      #                 bacnet-driver, dnp3-driver, logix-driver, omron-driver, tcp-driver
      # Notification: sms-notification, voice-notification
      - GATEWAY_MODULES_ENABLED=perspective,tag-historian,opc-ua,sql-bridge,web-developer
    restart: unless-stopped
    networks:
      - ignition-network

networks:
  ignition-network:
    driver: bridge
